{% extends parent_template|default:'quiz/base_quiz.html' %}

{% block title %}
    {{ block.super }} - {{ object.name }}
{% endblock title %}

{% block sub_content %}
    <style>
        li {
            padding-bottom: 10px;
            padding-top: 10px;
        }
    </style>

    <section>
        <header class="main">
            <h1>{{ object.name }}</h1>
        </header>

        {% if form_posted %}
            <div>
                <h2>You scored {{ quiz_score }} out of {{ quiz_total_questions }}!</h2>
                <a href="{{ quiz_start }}" class="button primary">Try Again?</a>
                <a href="{% url 'quiz_list' %}" class="button">Try Our Other Quizzes!</a>
            </div>
        {% endif %}

        <form action="{{ quiz_start }}" method="post">
            {% csrf_token %}
                {% if object.question_set.all %}
                    <ol>
                        {% for question in object.question_set.all %}
                            <li>
                                <strong>{{ question.question_text }}</strong>
                            </li>
                            {% for choice in question.get_random_choices %}
                                <input type="radio" name="{{ question.question_text }}" value="{{ choice }}" id="{{ question.question_text }} {{ forloop.counter0 }} {{ choice }}">
                                    {% if form_posted %}
                                            {% if choice == question.correct_choice %}
                                                <label><strong>{{ choice }}</strong></label><br>
                                            {% else %}
                                                <label>{{ choice }}</label><br>
                                            {% endif %}
                                    {% else %}
                                        <label for="{{ question.question_text }} {{ forloop.counter0 }} {{ choice }}">{{ choice }}</label><br>
                                    {% endif %}
                                </input>
                            {% endfor %}
                        {% endfor %}
                    </ol>
                {% endif %}

            <div>
                {% if not form_posted %}
                    <button class="primary" type="submit">Submit</button>
                    <button type="reset">Reset</button>
                {% endif %}
            </div>
        </form>
    </section>
{% endblock sub_content %}

